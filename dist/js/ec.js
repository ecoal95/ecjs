/*! EC.js - v0.1.0 - 2013-05-07
* Copyright (c) 2013 Emilio Cobos Álvarez; Licensed MIT */
(function(e,t){var n=e.document,r=e.EC=e.EC||{baseScriptPath:function(){var e=n.scripts[n.scripts.length-1];return e.src?e.src.replace(/[a-z\.A-Z0-9]+\.js$/,""):null}()},o=n.getElementsByTagName("script")[0],s={};r.core=r.core||{},r.core.extend=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},r.core.extend(r.core,{loaded:function(e){var n;for(e=e.split("/"),n=e.length;n--;)if(r[e[n]]===t)return!1;return!0},require:function(e,n){var o,s=function(e){return r.baseScriptPath+"ec."+e.replace(/\//g,"_").toLowerCase()+".js"};"string"==typeof e&&(e=[e]),o=function(){for(var t=e.length,o=0;t>o;o++)if(!r.core.loaded(e[o]))return;n&&"function"==typeof n&&n()},r.core.forEach(e,function(e){var n;return r.core.loaded(e)?o():(n=s(e),r.core.loadJS(n,o),t)})},loadJS:function(e,t){var r,s=n.createElement("script");s.async=!0,s.onload=s.onreadystatechange=function(){r||s.readyState&&"complete"!==s.readyState&&"loaded"!==s.readyState||(r=!0,t&&"function"==typeof t&&t.call(null,s))},s.src=e,o.parentNode.insertBefore(s,o)},loadCSS:function(e,r,i){var c=n.createElement("link");return i!==t?c.id=i:i=e,i in s?s[i]:(c.href=e,c.rel="stylesheet",c.type="text/css",s[i]=c,o.parentNode.insertBefore(c,o),setTimeout(r,0),t)},forEach:function(e,t){for(var n=0,r=e.length;r>n;n++)t.call(e[n],e[n],n);return!0},parseJSON:function(t){return e.JSON&&e.JSON.parse?e.JSON.parse(t):Function("return "+t)()},htmlEscape:function(e){return e.replace(/&|<|>/g,function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;"}[e]})},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}}),r.require=r.core.require})(window);