/*! EC.js - v0.1.0 - 2013-05-07
* Copyright (c) 2013 Emilio Cobos Álvarez; Licensed MIT */
(function(t,e){"use strict";var n=0;EC.modal=EC.modal||function(t){return this.id=++n,this.options=EC.core.extend({animation:"fade",animationDuration:600,maxWidth:600,topDistance:"25%",title:e,content:e,footer:e,customClose:!1},t),this.elements=this._createElements(),this},EC.modal.create=function(t){return new EC.modal(t)},EC.core.extend(EC.modal.prototype,{options:{},elements:{},_createElements:function(){var t=this,n={};return n.modal=EC.DOM.create("div",{className:"ec-modal",id:"ec-modal-"+this.id,style:{display:"none",width:"90%",maxWidth:this.options.maxWidth+"px"}}).appendTo("body"),EC.core.forEach(["title","content","footer"],function(o){t.options[o]!==e&&(n["modal_"+o]=EC.DOM.create("div",{className:"ec-modal-"+o}).appendTo(n.modal).append(t.options[o]))}),n.overlay=EC.DOM.create("div",{className:"ec-modal-overlay",style:{display:"none"}}).appendTo("body"),t.options.customClose||n.overlay.on("click",function(){t.close()}),n},remove:function(){return this.elements.modal.remove(),this.elements.overlay.remove(),null},show:function(t){var e=this.elements.modal,n=this.elements.overlay;switch(e.css({visibility:"hidden",display:"block"}),this.positionModal(),e.css("visibility","visible"),n.css("display","block"),this.options.animation){case"fade":e.css("opacity","0"),n.css("opacity","0"),n.animate({opacity:1},this.options.animationDuration),e.animate({opacity:1},this.options.animationDuration,"ease",t)}(t&&"function"==typeof t&&!this.options.animation||"none"===this.options.animation)&&t()},close:function(){this.elements.modal.css("display","none"),this.elements.overlay.css("display","none")},positionModal:function(){var e=this.elements.modal,n=e.get(0),o=n.offsetWidth/2;e.css({position:n.offsetHeight>t.screen.height*(100-parseInt(this.options.topDistance,10))/100?"absolute":"fixed",top:this.options.topDistance,left:"50%",marginLeft:"-"+o+"px"})}})})(window);